# 通俗的说海明码

计算机传输数据时，难免会出现错误，为了提高数据的正确性，通常有两种方法，第一种是从硬件方面着手，提高硬件的抗干扰能力，提高传输数据的正确率，第二种是从数据入手，冗余一些校验码，来检验发送出去的数据是否有错。当然第一种是需要一些硬件成本的，一般来说会选用冗余一些校验码来达到检测错误的效果，比较常用的有，奇偶校验码，循环冗余校验吗还有就是今天的主角，海明码

海明码是在原数据中加上r个校验位。那么海明码总共有2^r种序列，在这些序列当中，只有一种序列是数据正确的，其它的都是验证数据中有一位数据出错。假如数据中每个数据位的出错概率都是相同的，那么越多的数据，出错的概率就越大，海明码也是要校验自身的。设原数据总共有n位，那么应该满足以下关系

```
2^r - 1 >= n + r
```

比如说原数据为1010 1001

计算出r 为 4，于是总位数为12位，校验码的位置在该数据的2的n次幂的位置上（n >= 0）

|  1   |  2   |  3   |  4   |  5   |  6   |  7   |  8   |  9   |  10  |  11  |  12  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  x1  |  X2  |  1   |  x3  |  0   |  1   |  0   |  x4  |  1   |  0   |  0   |  1   |

### 如何计算海明码

现在把数据的位置都用4位二进制表示

| 0001 | 0010 | 0011 | 0100 | 0101 | 0110 | 0111 | 1000 | 1001 | 1010 | 1011 | 1100 |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|  x1  |  x2  |  1   |  x3  |  0   |  1   |  0   |  x4  |  1   |  0   |  0   |  1   |

假如现在要求x1，把每个位置的第一位为1的异或值为0，得出

```
x1⊕1⊕0⊕0⊕1⊕0 = 0
```

所以x1为0

由此可得 x2 = 0，x3 = 0，x4 = 0

因此海明码为001001001001

### 海明码的校验

如果第5个位置，也就是0101位置从0变为了1，我们如何知道是否出错，或者是哪里出错了呢？

计算所有 \*\*\*1, \*\*1*, \*1\*\*, 1\*\*\* 位置的数据，让它们分别异或

\*\*\*1 :  0⊕1⊕1⊕0⊕1⊕0 = 1
 \*\*1* : 0⊕1⊕1⊕0⊕0⊕0 = 0
\*1\*\* : 1⊕1⊕0⊕1 = 1
1\*\*\* : 0⊕1⊕0⊕0⊕1 = 0

只要有一个算出来为1，那么就代表有错，从下往上，出错的位置为0101

参考文章：https://blog.csdn.net/flyyufenfei/article/details/72235748