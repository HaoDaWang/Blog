# 我想用白话讲懂公钥和私钥

公钥和私钥这对东西很早就出现了， 其实想基本的弄懂它并不需要什么长篇大论，几句话就能说清楚的，所以我希望用一些简单易懂的话来帮助大家理解公钥和私钥。

### 公钥

公钥的作用通俗的来讲就是加密，比如你希望和 A 君之间的通信加密，这个时候你可以给 A 一个公钥，当 A 拿到公钥之后，之后 A 给你发的任何消息都能通过你给他的公钥来进行加密了，当你收到 A 的加密信息，那么你就可以通过你的私钥来进行解密看到明文了。

它的加密防止了在传输过程中的窃取。

### 私钥

私钥的作用除了用来解密公钥加密后的东西，还有个作用就是用来签名，签名的作用就是防止别人冒充自己发送消息，和你脑海里的签名的含义其实是差不多的，就是就像你签署一个文件，那只要签名后，别人要再冒充你发送消息就很困难了。

### 如何验证私钥签名的消息

还是上面那个例子，如果你想给 A 发送消息，那么你需要先将消息用 hash 算法产出一个 digest，即一个信息摘要，然后利用你的私钥将 digest 加密，现在要做的事情就是将信息加上 digest 给 A。

现在 A 拿到你传输的消息了，他会用你给的公钥来解密加密后的摘要，得到原始的摘要，然后 hash 原信息，将得到的结构跟 digest 进行对比，如果相等，那就是没有被修改伪造，这样就完成了签名的整个过程。

### 为什么要有 CA

CA 是一个值得信任的第三方机构，它的作用就是证明你给 A 的公钥真实有效。它的场景是，假如有人通过 （whatever）方法更换了你的公钥，比如现在有个人叫 B，它自己也有一个私钥和公钥，他通过一系列的办法把你给 A 的公钥换成了他自己的，接下来，它便可以无所顾忌的给 A 发送消息，A 也可以拿到 B 的公钥来解密，但是此时 A 并不知道他自己的公钥已经被换成 B 了的，他还以为他正在用你的公钥解密你发给他的信息，其实这时候发信息的是 B，换句话说，B 在通过偷换公钥冒充你。

这时候，需要一个值得信赖的第三方机构（CA），它也有一个公钥和私钥，它会用它的私钥将你的公钥和私钥的信息加上它的公钥进行签名，产出一个数字证书，然后将数字证书给你，下次你再跟 A 通信的时候，就发送数字证书和 CA 的公钥过去，A 在拿到 CA 的公钥的时候就能通过它来解开数字证书，拿到你的公钥，这个时候就能明辨公钥的真伪了。 

其实整个过程要的就是数字证书是信任和可靠的，这就需要一个合适的 CA 了呀～